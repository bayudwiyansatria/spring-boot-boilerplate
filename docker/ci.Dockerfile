#-----------------------------------------------------------------------------------------------------------------------
# Docker Base
#-----------------------------------------------------------------------------------------------------------------------
  FROM openjdk:21-slim-buster AS base
  LABEL maintainer="bayudwiyansatria@gmail.com"
  WORKDIR /app
    
#-----------------------------------------------------------------------------------------------------------------------
# Docker Build
#-----------------------------------------------------------------------------------------------------------------------
FROM maven:3.9.9-amazoncorretto-21 AS build
WORKDIR /build

ARG MAVEN_USERNAME
ARG MAVEN_PASSWORD

COPY target/*.jar app.jar

#-----------------------------------------------------------------------------------------------------------------------
# Docker Release
#-----------------------------------------------------------------------------------------------------------------------
FROM base AS release

COPY --from=build /build/app.jar app.jar

EXPOSE 80

ENTRYPOINT [ "java", "-jar" ,"app.jar" ]
  